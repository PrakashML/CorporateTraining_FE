<div class="header">
  <h2>Course Modules</h2>

  <button class="add-btn" [routerLink]="['create']">
    + Add Module
  </button>
</div>

<!-- âœ… CHILD ROUTE RENDERS HERE -->
<router-outlet></router-outlet>

@if (loading) {
<div class="loading-state">Loading modules...</div>
}

@if (error) {
<div class="error-state">{{ error }}</div>
}

@if (!loading && modules.length > 0) {
<div class="table-container">
  <table>
    <thead>
      <tr>
        <th style="width: 80px;">Order</th>
        <th>Title</th>
        <th>Duration</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      @for (module of modules; track module.id) {
      <tr>
        <td data-label="Order">#{{ module.moduleOrder }}</td>
        <td data-label="Title">{{ module.title }}</td>
        <td data-label="Duration">{{ module.durationMinutes }} mins</td>

        <td data-label="Status">
          <span class="status-badge" [class.active]="module.active" [class.inactive]="!module.active">
            {{ module.active ? 'Active' : 'Inactive' }}
          </span>
        </td>

        <td class="actions-cell" data-label="Actions">
          <button class="btn-action btn-edit" [routerLink]="['edit', module.id]">
            Edit
          </button>

          <button class="btn-action btn-delete" (click)="deleteModule(module.id)">
            Delete
          </button>
        </td>
      </tr>
      }
    </tbody>
  </table>
</div>
}

@if (!loading && modules.length === 0 && !error) {
<div class="empty-state">No modules added for this course yet.</div>
}