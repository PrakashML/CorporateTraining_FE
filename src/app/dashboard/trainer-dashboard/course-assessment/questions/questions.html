<h2>Assessment Questions</h2>

@if (loading) {
<p>Loading questions...</p>
}

@if (error) {
<div class="error">{{ error }}</div>
}

<!-- ================= ADD FORM ================= -->
<div class="add-card">
  <h3>Add Question</h3>

  <div class="form-group">
    <textarea [(ngModel)]="questionText" placeholder="Enter question text here..."></textarea>
  </div>

  <div class="form-group">
    <label>Options</label>
    <div class="options-input-grid">
      <input [(ngModel)]="optionA" placeholder="Option A">
      <input [(ngModel)]="optionB" placeholder="Option B">
      <input [(ngModel)]="optionC" placeholder="Option C">
      <input [(ngModel)]="optionD" placeholder="Option D">
    </div>
  </div>

  <div class="form-group">
    <label>Correct Option</label>
    <select [(ngModel)]="correctOption">
      <option value="A">Option A</option>
      <option value="B">Option B</option>
      <option value="C">Option C</option>
      <option value="D">Option D</option>
    </select>
  </div>

  <div class="add-btn-container">
    <button class="btn primary" (click)="addQuestion()">Add Question</button>
  </div>
</div>

<!-- ================= LIST (CARDS) ================= -->
@if (!loading && questions.length > 0) {
<div class="questions-grid">
  @for (q of questions; track q.id) {
  <div class="question-card">

    <div class="q-header">
      <h4 class="q-text">{{ q.questionText }}</h4>
    </div>

    <div class="options-list">
      <div class="option-item" [class.correct]="q.correctOption === 'A'">
        <span class="option-marker">A</span>
        {{ q.optionA }}
      </div>
      <div class="option-item" [class.correct]="q.correctOption === 'B'">
        <span class="option-marker">B</span>
        {{ q.optionB }}
      </div>
      <div class="option-item" [class.correct]="q.correctOption === 'C'">
        <span class="option-marker">C</span>
        {{ q.optionC }}
      </div>
      <div class="option-item" [class.correct]="q.correctOption === 'D'">
        <span class="option-marker">D</span>
        {{ q.optionD }}
      </div>
    </div>

    <div class="card-footer">
      <button class="btn danger" (click)="deleteQuestion(q.id)">
        Delete Question
      </button>
    </div>

  </div>
  }
</div>
}

@if (!loading && questions.length === 0) {
<div class="empty-state">No questions added yet.</div>
}